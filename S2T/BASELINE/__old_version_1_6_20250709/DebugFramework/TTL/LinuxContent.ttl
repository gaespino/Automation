; Connection stablish
sendln '#Starting Linux Testing FLOW -- GNR Debug Framework'
timeout = 10

sendln 'fs1:'
mpause 100

; Send the command to boot
sendln 'bootlinux.nsh'

; Wait for 10 seconds
pause 10

; Wait for the connection to establish
:check
wait 'Press any key to continue...' 'GRUB version' '--MORE--' 'PROCESS'
if result=0 goto error
if result=1 goto moreset
if result=2 goto nextos
if result=3 goto moreset
if result=4 goto startlogin

:moreset
sendln ''
goto check

:nextos
; Navigate the OS option window
; Assuming the Linux OS is the second option, send the down arrow key
sendkcode 336 1
pause 3 ; Wait for 3 second
sendln ''

:startlogin

include 'Connect.ttl'

; Wait for OS to be connected over SSH
wait '#CONNECTED'
if result=0 goto errorlinux
if result=1 goto content

:content

; Add content to run below this lines

;sendln 'cd /root/content/LOS/TSL/bin'
;mpause 10

timeout = 99999999
sendln '#Starting Linux Content Loops'
wait 'Starting Linux Content Loops
if result=0 goto errorlinux
if result=1 goto nextloop1

:nextloop1

sendln '/usr/local/bin/ocelot --flow /root/content/LOS/LOS-23WW24/Mlc/flows/Mlc_data_n3.xml --write_log_file_to_stdout=on --ituff=off'
pause 5

sendln '#Linux loop1 Done'
wait 'Linux loop1 Done'
if result=0 goto errorlinux
if result=1 goto nextloop2

:nextloop2


sendln '/usr/local/bin/ocelot --flow /root/content/LOS/LOS-23WW24/Mlc/flows/Mlc_data_n3.xml --write_log_file_to_stdout=on --ituff=off'
pause 5

sendln '#Linux loop2 Done'
wait 'Linux loop2 Done'
if result=0 goto errorlinux
if result=1 goto nextloop3

:nextloop3


sendln '/usr/local/bin/ocelot --flow /root/content/LOS/LOS-23WW24/Mlc/flows/Mlc_data_n3.xml --write_log_file_to_stdout=on --ituff=off'
pause 5

sendln '#Linux loop3 Done'
wait 'Linux loop3 Done'
if result=0 goto errorlinux
if result=1 goto success


;You can add PASS/FAIL Conditions here
;wait 'Result=SUCCESS' 'TestStatus.FAILURE'

;if result=1 goto success
;if result=2 goto errorlinux

:errorlinux
sendln '#Test FAILED'
end

:success
sendln '#Test Complete'